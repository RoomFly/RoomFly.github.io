<!Doctype html>
<head>
  <meta charset="utf-8">
  <title>RoomFly</title>
  <meta name="description" content="RoomFly">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/datepicker.css">

  <!-- JavaScript -->
  <script type="text/javascript" src="js/jquery-1.11.0.js"></script>
  <script src = 'js/bootstrap.js'></script>
  <!--Always include this in html file-->
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
  <script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
</head>

<body>

  <div id="main">
    <h2>Welcome RoomFly!</h2>
  </div>

  <!-- Filter Collapse -->
  <div class="panel-group" id="accordion">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
            Filters
          </a>
        </h4>
      </div>
      <div id="collapseOne" class="panel-collapse collapse in">
        <div class="panel-body">
          <form>

            <!-- Size Filter -->
            <div class="form-group">
              <label class="control-label">Size: </label>
              <select id="size" class="form-control">
                <option>Small</option>
                <option>Medium</option>
                <option>Large</option>
              </select>
            </div>

            <!-- Date Filter -->
            <label class="control-label">Date: </label>
            <div class="input-append date" id="dp3" data-date-format="dd-mm-yyyy">
              <div class="input-group">
                <input id="date-input" class="form-control" type="text"></input>
                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
              </div>
            </div>
            
            <!-- Time Filter -->
            <div>
              <label class="control-label">Time: </label>
            </div>
            <div>
              <label class="control-label">To: </label>
            </div>
            <div class="col-xs-4">
              <select id="start-hour" class="col-xs-6 form-control">
                <option>01</option>
                <option>02</option>
                <option>03</option>
                <option>04</option>
                <option>05</option>
                <option>06</option>
                <option>07</option>
                <option>08</option>
                <option>09</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
              </select>
            </div>
            <div class="col-xs-4">
              <select id="start-minute" class="form-control">
                <option>00</option>
                <option>30</option>
              </select>
            </div>
            <div class="col-xs-4">
              <select id="start-ampm" class="form-control">
                <option>AM</option>
                <option>PM</option>
              </select>
            </div>
            <div>
              <label class="control-label">From: </label>
            </div>
            <div class="col-xs-4">
              <select id="end-hour" class="col-xs-6 form-control">
                <option>01</option>
                <option>02</option>
                <option>03</option>
                <option>04</option>
                <option>05</option>
                <option>06</option>
                <option>07</option>
                <option>08</option>
                <option>09</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
              </select>
            </div>
            <div class="col-xs-4">
              <select id="end-minute" class="form-control">
                <option>00</option>
                <option>30</option>
              </select>
            </div>
            <div class="col-xs-4">
              <select id="end-ampm" class="form-control">
                <option>AM</option>
                <option>PM</option>
              </select>
            </div>
            
            <!-- Submit -->
            <div>
              <submit id="submit" class="btn btn-default">Submit</submit>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Available Room List -->
  <div class="list-group">
    <a href="#" class="list-group-item active">
      Available Rooms at DATE and TIME
    </a>
    <div href="#" class="list-group-item">LR 2
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">M166
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">M164
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">LR 3
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">LR 4
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>

    <!-- Reserve Room Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Reserve Room</h4>
          </div>
          <div class="modal-body">
            <a href="https://25live.collegenet.com/northwestern/">Click here</a> to go to 25 Live and reserve the room.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth() + 1;
    var yyyy = today.getFullYear();
    if (dd < 10) {
      dd = '0' + dd;
    }

    if (mm < 10) {
      mm = '0' + mm;
    }

    today = mm + '-' + dd + '-' + yyyy;

    $("#submit").click(function() {
      var size = $("#size").val(),
      date = $("#dp3").datepicker('getDate'),
      startTime = convertTime($("#start-hour").val(), $("#start-minute").val(), $("#start-ampm").val()),
      endTime = convertTime($("#end-hour").val(), $("#end-minute").val(), $("#end-ampm").val());
    });

    $("#dp3").datepicker({
      orientation: "left",
      autoclose: true,
      startDate: new Date(),
      todayHighlight: true
    });

    $("#date-input").val(today);

    function convertTime(hour, minute, ampm) {
      var time = hour + ":" + minute + " " + ampm;
      var hours = Number(time.match(/^(\d+)/)[1]);
      var minutes = Number(time.match(/:(\d+)/)[1]);
      var AMPM = time.match(/\s(.*)$/)[1];
      if(AMPM == "PM" && hours<12) hours = hours+12;
      if(AMPM == "AM" && hours==12) hours = hours-12;
      var sHours = hours.toString();
      var sMinutes = minutes.toString();
      if(hours<10) sHours = "0" + sHours;
      if(minutes<10) sMinutes = "0" + sMinutes; 
      return {
        hour: sHours,
        minute: sMinutes
      };
    }
    </script>
    <script src = 'js/Parse.js'></script>
  </body>

  </html>
