<!Doctype html>
<head>
  <meta charset="utf-8">
  <title>RoomFly</title>
  <meta name="description" content="RoomFly">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>

  <!-- CSS -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/datepicker.css">
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/smoothness/jquery-ui.css" />

  <!-- JavaScript -->
  <script src = 'js/bootstrap.js'></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
  <!-- // <script type="text/javascript" src="js/jquery-1.11.0.js"></script> -->
  <!--Always include this in html file-->
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
  <!-- // <script type="text/javascript" src="js/bootstrap-datepicker.js"></script> -->
</head>

<body>

  <div id="main">
    <h2>Welcome RoomFly!</h2>
  </div>

  <!-- Room Filters -->
  <div class="panel-group" id="accordion">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
            Filters
          </a>
        </h4>
      </div>
      <div id="collapseOne" class="panel-collapse collapse in">
        <div class="panel-body">
          <div class="form-group">

            <!-- Size Filter -->
            <label class="control-label">Size: </label>
            <select class="form-control" id="size">
              <option>Small</option>
              <option>Medium</option>
              <option>Large</option>
            </select>
          </div>

          <!-- Date Filter -->
          <label class="control-label">Date: </label>
          <div class="input-append date" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
            <input readonly="true" class="form-control" id="dp3" type="text" value="12-02-2012">
          </div>
          
          <!-- Time Filter -->
          <div>
            <label class="control-label">Time: </label>
          </div>
          <div>
            <label class="control-label">To: </label>
          </div>
          <div class="col-xs-4">
            <select class="col-xs-6 form-control" id="start-hour">
              <option>01</option>
              <option>02</option>
              <option>03</option>
              <option>04</option>
              <option>05</option>
              <option>06</option>
              <option>07</option>
              <option>08</option>
              <option>09</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
            </select>
          </div>
          <div class="col-xs-4">
            <select class="form-control" id="start-minute">
              <option>00</option>
              <option>30</option>
            </select>
          </div>
          <div class="col-xs-4">
            <select class="form-control" id="start-ampm">
              <option>AM</option>
              <option>PM</option>
            </select>
          </div>
          <div>
            <label class="control-label">From: </label>
          </div>
          <div class="col-xs-4">
            <select class="col-xs-6 form-control" id="end-hour">
              <option>01</option>
              <option>02</option>
              <option>03</option>
              <option>04</option>
              <option>05</option>
              <option>06</option>
              <option>07</option>
              <option>08</option>
              <option>09</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
            </select>
          </div>
          <div class="col-xs-4">
            <select class="form-control" id="end-minute">
              <option>00</option>
              <option>30</option>
            </select>
          </div>
          <div class="col-xs-4">
            <select class="form-control" id="end-ampm">
              <option>AM</option>
              <option>PM</option>
            </select>
          </div>
          
          <!-- Submit -->
          <div>
            <button class="btn btn-default" id="submit">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Available Room List -->
  <div class="list-group">
    <a href="#" class="list-group-item active">
      Available Rooms at DATE and TIME
    </a>
    <div href="#" class="list-group-item">
      LR 2
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">M166
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">M164
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">LR 3
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>
    <div href="#" class="list-group-item">LR 4
      <button class="btn btn-default pull-right" data-target="#myModal" data-toggle="modal">Reserve</button>
    </div>

    <!-- Reserve Room Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Reserve Room</h4>
          </div>
          <div class="modal-body">
            <a href="https://25live.collegenet.com/northwestern/">Click here</a> to go to 25 Live and reserve the room.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">

    $( "#dp3" ).datepicker({ minDate: 0});
    $("#dp3").val(getToday());
    $("#submit").click(getFilterVals());
    
    function getToday() {
      var today = new Date();
      var dd = today.getDate();
      var mm = today.getMonth() + 1;
      var yyyy = today.getFullYear();
      if (dd < 10) {
        dd = '0' + dd;
      }

      if (mm < 10) {
        mm = '0' + mm;
      }

      today = mm + '/' + dd + '/' + yyyy;
      return today;
    }
  
    function getFilterVals() {
      var size = $("#size").val();
      date = $("#dp3").datepicker('getDate'),
      startTime = convertTime($("#start-hour").val(), $("#start-minute").val(), $("#start-ampm").val()),
      endTime = convertTime($("#end-hour").val(), $("#end-minute").val(), $("#end-ampm").val());
      return {
        size: size,
        date: date,
        startTime: startTime,
        endTime: endTime
      };
      // return size;
    }

    function convertTime(hour, minute, ampm) {
      var time = hour + ":" + minute + " " + ampm;
      var hours = Number(time.match(/^(\d+)/)[1]);
      var minutes = Number(time.match(/:(\d+)/)[1]);
      var AMPM = time.match(/\s(.*)$/)[1];
      if(AMPM == "PM" && hours<12) hours = hours+12;
      if(AMPM == "AM" && hours==12) hours = hours-12;
      var sHours = hours.toString();
      var sMinutes = minutes.toString();
      if(hours<10) sHours = "0" + sHours;
      if(minutes<10) sMinutes = "0" + sMinutes; 
      return {
        hour: sHours,
        minute: sMinutes
      };
    }

    </script>
    <script src = 'js/Parse.js'></script>
  </body>

  </html>
